{"is_source_file": true, "format": "Python", "description": "This is a FastAPI Python source file that defines a RESTful API for a ticket booking application. It includes setup for database models using SQLAlchemy, API route handlers for user management, bookings, payments, notifications, and admin actions, as well as middleware configuration and startup routines.", "external_files": ["fastapi", "pydantic", "sqlalchemy", "os", "typing"], "external_methods": ["fastapi.FastAPI", "fastapi.Depends", "fastapi.HTTPException", "fastapi.Headers", "fastapi.Query", "fastapi.Path", "fastapi.status", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "pydantic.EmailStr", "sqlalchemy.ext.asyncio.create_async_engine", "sqlalchemy.ext.asyncio.async_sessionmaker", "sqlalchemy.orm.declarative_base", "sqlalchemy.orm.Mapped", "sqlalchemy.orm.mapped_column", "sqlalchemy.String", "sqlalchemy.Integer", "sqlalchemy.ForeignKey", "sqlalchemy.DateTime", "sqlalchemy.func", "sqlalchemy.Float", "sqlalchemy.Text", "sqlalchemy.select"], "published": ["app", "health_check", "create_user", "list_users", "get_user", "update_user", "delete_user", "login_user", "list_bookings", "create_booking", "get_booking", "update_booking", "cancel_booking", "initiate_payment", "get_payment", "list_notifications", "record_admin_action"], "classes": [{"name": "UserORM", "description": "SQLAlchemy ORM model representing users table with id, email, name, role, and created_at fields."}, {"name": "BookingORM", "description": "SQLAlchemy ORM model representing bookings with fields for user, room, seat, status, and timestamps."}, {"name": "PaymentORM", "description": "SQLAlchemy ORM model representing payments with fields for booking, amount, currency, status, and timestamps."}, {"name": "NotificationORM", "description": "SQLAlchemy ORM model representing notifications linked to users with message details."}, {"name": "User", "description": "Pydantic model for user data in API contracts."}, {"name": "LoginRequest", "description": "Pydantic model for login request payload."}, {"name": "LoginResponse", "description": "Pydantic model for login response containing tokens and user info."}, {"name": "Booking", "description": "Pydantic model for booking data."}, {"name": "PaginatedResult", "description": "Pydantic model for paginated API responses."}, {"name": "Payment", "description": "Pydantic model for payment data."}, {"name": "Notification", "description": "Pydantic model for notification data."}, {"name": "AdminAction", "description": "Pydantic model for admin actions."}], "methods": [{"name": "AsyncSession get_db()", "description": "Dependency generator that yields an asynchronous database session for FastAPI route handlers.", "scope": "", "scopeKind": ""}, {"name": "cancel_booking(id: str, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_booking(booking: Booking, db: AsyncSession = Depends(get_db), idempotency_key: Optional[str] = Header(default=None, alias=\"Idempotency-Key\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "create_user(user: User, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "delete_user(id: str, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_booking(id: str, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_payment(id: str, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "get_user(id: str = Path(...), db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health_check()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "initiate_payment(payment: Payment, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_bookings( limit: int = Query(20, ge=1, le=100), offset: int = Query(0, ge=0), status_filter: Optional[str] = Query(None, alias=\"status\"), db: AsyncSession = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_notifications(userId: Optional[str] = Query(None), db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "list_users( limit: int = Query(20, ge=1, le=100), offset: int = Query(0, ge=0), db: AsyncSession = Depends(get_db), )", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "login_user(payload: LoginRequest)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "on_startup()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "record_admin_action(action: AdminAction)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_booking(id: str, booking: Booking, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "update_user(id: str, user: User, db: AsyncSession = Depends(get_db))", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["create_async_engine", "async_sessionmaker", "declarative_base", "app.add_middleware", "app.on_event", "select", "FastAPI", "Depends", "HTTPException", "Query", "Path", "status.HTTP_201_CREATED", "status.HTTP_204_NO_CONTENT"], "search-terms": ["FastAPI", "SQLAlchemy models", "API endpoints", "async database", "ticket booking", "booking API", "user management", "payment processing"], "state": 2, "file_id": 3, "knowledge_revision": 10, "git_revision": "08ab2dee0ab3dce2f054cb8da4a92d4fb00bd7c6", "revision_history": [{"9": "08ab2dee0ab3dce2f054cb8da4a92d4fb00bd7c6"}, {"10": "08ab2dee0ab3dce2f054cb8da4a92d4fb00bd7c6"}], "ctags": [{"_type": "tag", "name": "AdminAction", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class AdminAction(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Booking", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class Booking(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "BookingORM", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class BookingORM(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    DATABASE_URL = \"sqlite+aiosqlite:\\/\\/\\/:memory:\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^DATABASE_URL = os.getenv(\"DATABASE_URL\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ErrorModel", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class ErrorModel(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginRequest", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class LoginRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LoginResponse", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class LoginResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Notification", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class Notification(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "NotificationORM", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class NotificationORM(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PaginatedResult", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class PaginatedResult(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "Payment", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class Payment(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "PaymentORM", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class PaymentORM(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class User(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "UserORM", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^class UserORM(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    __tablename__ = \"bookings\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "BookingORM", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    __tablename__ = \"notifications\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "NotificationORM", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    __tablename__ = \"payments\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "PaymentORM", "scopeKind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    __tablename__ = \"users\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "UserORM", "scopeKind": "class"}, {"_type": "tag", "name": "allow_origins", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    allow_origins = [\"*\"]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "allow_origins", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^allow_origins = [o for o in [frontend_url, backend_url] if o]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "amount", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    amount: Mapped[float] = mapped_column(Float)$/", "language": "Python", "typeref": "typename:Mapped[float]", "kind": "variable", "scope": "PaymentORM", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "async_session", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async_session = async_sessionmaker(engine, expire_on_commit=False)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "backend_url", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^backend_url = os.getenv(\"REACT_APP_BACKEND_URL\", \"*\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "booking_id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    booking_id: Mapped[str] = mapped_column(ForeignKey(\"bookings.id\"))$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "PaymentORM", "scopeKind": "class"}, {"_type": "tag", "name": "cancel_booking", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def cancel_booking(id: str, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(id: str, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "create_booking", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def create_booking(booking: Booking, db: AsyncSession = Depends(get_db), idempotency_key: /", "language": "Python", "kind": "function", "signature": "(booking: Booking, db: AsyncSession = Depends(get_db), idempotency_key: Optional[str] = Header(default=None, alias=\"Idempotency-Key\"))"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def create_user(user: User, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(user: User, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    created_at: Mapped[DateTime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[DateTime]", "kind": "variable", "scope": "BookingORM", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    created_at: Mapped[DateTime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[DateTime]", "kind": "variable", "scope": "NotificationORM", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    created_at: Mapped[DateTime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[DateTime]", "kind": "variable", "scope": "PaymentORM", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    created_at: Mapped[DateTime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[DateTime]", "kind": "variable", "scope": "UserORM", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    created_at: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Booking", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    created_at: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Notification", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    created_at: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Payment", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    created_at: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "currency", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    currency: Mapped[str] = mapped_column(String)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "PaymentORM", "scopeKind": "class"}, {"_type": "tag", "name": "delete_user", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def delete_user(id: str, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(id: str, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "details", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    details: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "ErrorModel", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    email: Mapped[str] = mapped_column(String, unique=True, index=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "UserORM", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^engine = create_async_engine(DATABASE_URL, echo=False, future=True)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "frontend_url", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^frontend_url = os.getenv(\"REACT_APP_FRONTEND_URL\", \"*\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_booking", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def get_booking(id: str, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(id: str, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def get_db() -> AsyncSession:$/", "language": "Python", "typeref": "typename:AsyncSession", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_payment", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def get_payment(id: str, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(id: str, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "get_user", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def get_user(id: str = Path(...), db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(id: str = Path(...), db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    id: Mapped[str] = mapped_column(String, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "BookingORM", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    id: Mapped[str] = mapped_column(String, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "NotificationORM", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    id: Mapped[str] = mapped_column(String, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "PaymentORM", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    id: Mapped[str] = mapped_column(String, primary_key=True)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "UserORM", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    id: str = Field(..., description=\"Unique identifier for the user\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "initiate_payment", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def initiate_payment(payment: Payment, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payment: Payment, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "list_bookings", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def list_bookings($/", "language": "Python", "kind": "function", "signature": "( limit: int = Query(20, ge=1, le=100), offset: int = Query(0, ge=0), status_filter: Optional[str] = Query(None, alias=\"status\"), db: AsyncSession = Depends(get_db), )"}, {"_type": "tag", "name": "list_notifications", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def list_notifications(userId: Optional[str] = Query(None), db: AsyncSession = Depends(get/", "language": "Python", "kind": "function", "signature": "(userId: Optional[str] = Query(None), db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "list_users", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def list_users($/", "language": "Python", "kind": "function", "signature": "( limit: int = Query(20, ge=1, le=100), offset: int = Query(0, ge=0), db: AsyncSession = Depends(get_db), )"}, {"_type": "tag", "name": "login_user", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def login_user(payload: LoginRequest):$/", "language": "Python", "kind": "function", "signature": "(payload: LoginRequest)"}, {"_type": "tag", "name": "message", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    message: Mapped[str] = mapped_column(Text)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "NotificationORM", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    name: Mapped[str] = mapped_column(String)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "UserORM", "scopeKind": "class"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def on_startup():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "openapi_tags", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^openapi_tags = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "record_admin_action", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def record_admin_action(action: AdminAction):$/", "language": "Python", "kind": "function", "signature": "(action: AdminAction)"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    role: Mapped[str] = mapped_column(String, default=\"user\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "UserORM", "scopeKind": "class"}, {"_type": "tag", "name": "role", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    role: str = Field(default=\"user\", description=\"Role of the user: user or admin\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "User", "scopeKind": "class"}, {"_type": "tag", "name": "room_id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    room_id: Mapped[Optional[str]] = mapped_column(String, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "BookingORM", "scopeKind": "class"}, {"_type": "tag", "name": "room_id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    room_id: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Booking", "scopeKind": "class"}, {"_type": "tag", "name": "seat_id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    seat_id: Mapped[Optional[str]] = mapped_column(String, nullable=True)$/", "language": "Python", "typeref": "typename:Mapped[Optional[str]]", "kind": "variable", "scope": "BookingORM", "scopeKind": "class"}, {"_type": "tag", "name": "seat_id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    seat_id: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Booking", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    status: Mapped[str] = mapped_column(String, default=\"initiated\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "PaymentORM", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    status: Mapped[str] = mapped_column(String, default=\"pending\")$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "BookingORM", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    status: str = Field(default=\"initiated\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Payment", "scopeKind": "class"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    status: str = Field(default=\"pending\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "Booking", "scopeKind": "class"}, {"_type": "tag", "name": "type", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    type: Mapped[str] = mapped_column(String)$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "NotificationORM", "scopeKind": "class"}, {"_type": "tag", "name": "update_booking", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def update_booking(id: str, booking: Booking, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(id: str, booking: Booking, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "update_user", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^async def update_user(id: str, user: User, db: AsyncSession = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(id: str, user: User, db: AsyncSession = Depends(get_db))"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    updated_at: Mapped[DateTime] = mapped_column(DateTime(timezone=True), server_default=func.no/", "language": "Python", "typeref": "typename:Mapped[DateTime]", "kind": "variable", "scope": "BookingORM", "scopeKind": "class"}, {"_type": "tag", "name": "updated_at", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    updated_at: Optional[str] = None$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "Booking", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    user_id: Mapped[str] = mapped_column(ForeignKey(\"users.id\"))$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "BookingORM", "scopeKind": "class"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/ticket-booking-app-148553-149049/BackendAPI/src/api/main.py", "pattern": "/^    user_id: Mapped[str] = mapped_column(ForeignKey(\"users.id\"))$/", "language": "Python", "typeref": "typename:Mapped[str]", "kind": "variable", "scope": "NotificationORM", "scopeKind": "class"}], "hash": "6124e2488ed9507834475b6557496d14", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/api/main.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = \"sqlite+aiosqlite:\\/\\/\\/:memory:\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DATABASE_URL = os.getenv(\"DATABASE_URL\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"bookings\"", "scope": "BookingORM", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"notifications\"", "scope": "NotificationORM", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"payments\"", "scope": "PaymentORM", "scopeKind": "class", "description": "unavailable"}, {"name": "__tablename__ = \"users\"", "scope": "UserORM", "scopeKind": "class", "description": "unavailable"}, {"name": "allow_origins = [\"*\"]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "allow_origins = [o for o in [frontend_url, backend_url] if o]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Mapped[float] amount", "scope": "PaymentORM", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "async_session = async_sessionmaker(engine, expire_on_commit=False)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "backend_url = os.getenv(\"REACT_APP_BACKEND_URL\", \"*\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Mapped[str] booking_id", "scope": "PaymentORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[DateTime] created_at", "scope": "BookingORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] created_at", "scope": "Booking", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] currency", "scope": "PaymentORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] details", "scope": "ErrorModel", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] email", "scope": "UserORM", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_async_engine(DATABASE_URL, echo=False, future=True)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "frontend_url = os.getenv(\"REACT_APP_FRONTEND_URL\", \"*\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Mapped[str] id", "scope": "BookingORM", "scopeKind": "class", "description": "unavailable"}, {"name": "str id", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] message", "scope": "NotificationORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] name", "scope": "UserORM", "scopeKind": "class", "description": "unavailable"}, {"name": "openapi_tags = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Mapped[str] role", "scope": "UserORM", "scopeKind": "class", "description": "unavailable"}, {"name": "str role", "scope": "User", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] room_id", "scope": "BookingORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] room_id", "scope": "Booking", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[Optional[str]] seat_id", "scope": "BookingORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] seat_id", "scope": "Booking", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] status", "scope": "PaymentORM", "scopeKind": "class", "description": "unavailable"}, {"name": "str status", "scope": "Payment", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] type", "scope": "NotificationORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[DateTime] updated_at", "scope": "BookingORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] updated_at", "scope": "Booking", "scopeKind": "class", "description": "unavailable"}, {"name": "Mapped[str] user_id", "scope": "BookingORM", "scopeKind": "class", "description": "unavailable"}]}